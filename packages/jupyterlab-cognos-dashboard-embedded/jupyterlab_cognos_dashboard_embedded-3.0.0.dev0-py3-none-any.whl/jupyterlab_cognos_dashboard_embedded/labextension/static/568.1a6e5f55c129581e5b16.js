(self.webpackChunkjupyterlab_cognos_dashboard_embedded=self.webpackChunkjupyterlab_cognos_dashboard_embedded||[]).push([[568],{649:function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(a,s){function i(e){try{r(o.next(e))}catch(e){s(e)}}function d(e){try{r(o.throw(e))}catch(e){s(e)}}function r(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,d)}r((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CognosDashboardFactory=t.CognosDashboardWidget=void 0;const a=n(353),s=n(797),i=n(510),d=n(290),r=n(441),c=n(275),l=n(958);class p extends a.DocumentWidget{constructor(e){super(Object.assign({},e)),this._ready=new s.PromiseDelegate,this._cognosReady=new s.PromiseDelegate,this.cognosOpen=!1,this.setCredential=e=>o(this,void 0,void 0,(function*(){const t=d.ServerConnection.makeSettings(),n=c.URLExt.join(t.baseUrl,"/cognos/credentials");return d.ServerConnection.makeRequest(n,{method:"PUT",body:JSON.stringify({credentials:e})},t).then((e=>e.json()))})),this.getSession=()=>o(this,void 0,void 0,(function*(){const e=d.ServerConnection.makeSettings(),t=c.URLExt.join(e.baseUrl,"/cognos/sessionCode"),n=yield d.ServerConnection.makeRequest(t,{method:"POST",body:JSON.stringify({origin:window.location.origin})},e).then((e=>e.json()));if(n.sessionCode)return n;throw"Quota overflow."===n.description?new Error("Quota overflow"):(console.table(n),new Error(n))})),this.openCognosDashboard=(e,t)=>{this._ready.resolve(void 0),l("<script>").attr("type","text/javascript").text(`\n\n        window.api = new CognosApi({\n          cognosRootURL: "${t}",\n          sessionCode: "${e}",\n          initTimeout: 10000,\n          node: document.getElementById("cognos-container")\n        });     `).appendTo("head"),setTimeout((()=>{this.cognosApi=window.api,this._cognosReady.resolve(void 0)}),1500)},this.handleDataOverflow=()=>{const e=document.createElement("div"),t=document.createElement("h2");t.innerHTML="Ready for an Upgrade?";const n=document.createElement("p");n.innerHTML='It looks like you have a <em>Lite</em> (free) plan, and have used up all of your sessions for this month.</br>    <a href="https://console.bluemix.net/catalog/services/ibm-cognos-dashboard-embedded" rel="noopener" target="_blank">      Please consider upgrading from a <em>Lite</em> plan to a <em>Pay as you go</em> plan.\n    </a>\n    </br>';const o=document.createElement("button");o.className="jp-Dialog-button jp-mod-accept jp-mod-styled",o.innerHTML="Click here to enter your new credentials after upgrading",o.onclick=()=>{this.setCredential({client_id:"",client_secret:"",api_endpoint_url:""}).then((()=>{this.startCognosDashboard()}))},e.appendChild(t),e.appendChild(n),e.appendChild(o),this.container.appendChild(e),this._ready.resolve(void 0)},this.handleInvalidCredential=e=>o(this,void 0,void 0,(function*(){this.credentialsSubmitButton=r.Dialog.okButton();const t="Client credentials are required for this API"===e?"":"The service credentials you entered were invalid.",n=yield r.showDialog({title:t+"Please enter Cognos Dashboard Embedded service credentials on IBM Cloud:",body:new h.CredentialsForm(this),buttons:[r.Dialog.cancelButton(),this.credentialsSubmitButton]});if(l(".jp-Dialog-button").click((()=>{})),!n.button.accept)throw new Error("User cancelled");yield this.setCredential({client_id:this.client_id,client_secret:this.client_secret,api_endpoint_url:this.api_endpoint_url||"https://us-south.dynamic-dashboard-embedded.cloud.ibm.com/daas/"});try{const{sessionCode:e,apiEndpointUrl:t}=yield this.getSession();this.openCognosDashboard(e,t)}catch(e){console.error(e),"Quota overflow"===e.message?this.handleDataOverflow():this.handleInvalidCredential("Invalid Credentials")}})),this.startCognosDashboard=()=>o(this,void 0,void 0,(function*(){try{const{sessionCode:e,apiEndpointUrl:t}=yield this.getSession();this._ready.resolve(void 0),l("<script>").attr("type","text/javascript").text(`\n          window.api = new CognosApi({\n            cognosRootURL: "${t}",\n            sessionCode: "${e}",\n            initTimeout: 10000,\n            node: document.getElementById("cognos-container")\n          });       `).appendTo("head"),setTimeout((()=>{this.cognosApi=window.api,this._cognosReady.resolve(void 0)}),1500)}catch(e){console.error(e),"Quota overflow"===e.message?this.handleDataOverflow():"User cancelled"===e.message||this.handleInvalidCredential(e)}})),this.addSource=()=>{window.jupyterlabCDEPlugin.openSourceManager()},this.dashboardSpec=()=>new Promise(((e,t)=>{this.dashboardApi.getSpec().then((n=>{n?e(n):t()}))})),this.setDashboardMode=e=>{this._dashboardMode=e;for(const t of[this.saveButton,this.undoButton,this.redoButton,this.propertiesButton])t.disabled="VIEW"===e;this.dashboardApi&&this.dashboardApi.setMode(this.dashboardApi.MODES[e]),this.modeSelect.value=e},this.saveDashboard=()=>{this._saveToContext().then((()=>{this.context.save()}))},this.undo=()=>{this.dashboardApi.undo()},this.redo=()=>{this.dashboardApi.redo()},this.onModeSelectChange=e=>{this.setDashboardMode(e.target.value)},this.toggleProperties=()=>{this.dashboardApi.toggleProperties()},this.shareDashboard=()=>{this.saveDashboard();const e=this.api_endpoint_url,t=this.client_id,n=this.client_secret;this.dashboardSpec().then((o=>{const a={client_id:t,client_secret:n,cognos_root_url:e,dashboard_spec:o},s=d.ServerConnection.makeSettings(),i=c.URLExt.join(s.baseUrl,"/share-cde");d.ServerConnection.makeRequest(i,{method:"POST",body:JSON.stringify(a)},s).then((e=>{e.json().then((e=>{const t=e.data.url_path;r.showDialog({title:"Your dashboard is now available on Skills Network Showcase:",body:new h.ShowcaseLink(this,t),buttons:[r.Dialog.okButton({label:"Dismiss"})]}).then((e=>{}))}))}))}))},this.openTutorialMenu=()=>{r.showDialog({title:"Select a tutorial section",body:new h.TutorialMenu(this),buttons:[r.Dialog.okButton()]})},this._onContentChanged=()=>{this.cognosOpen||this.cognosReady.then((()=>{this.setDashboardMode("VIEW"),this.cognosApi.initialize().then((()=>{const e=this.context.model.toJSON();e?this.cognosApi.dashboard.openDashboard({dashboardSpec:e}).then((e=>{this.setDashboardMode("VIEW"),e.on("addSource:clicked",this.addSource),this.dashboardApi=e,window.currentDashboard=e,this.cognosOpen=!0})):this.cognosApi.dashboard.createNew().then((e=>{this.setDashboardMode("EDIT"),this.dashboardApi=e,this.dashboardApi.on("addSource:clicked",this.addSource),window.currentDashboard=e,this.cognosOpen=!0})).catch((e=>{console.error(e)}))}),(e=>{console.error(e)})).catch((e=>{console.error(e)}))}))},this._onModelStateChangedCognos=(e,t)=>{"dirty"===t.name&&this._handleDirtyStateCognos()},this._handleDirtyStateCognos=()=>{},this._saveToContext=()=>new Promise(((e,t)=>{this.dashboardSpec().then((t=>{this.context.model.fromJSON(t),e(void 0)})).catch((()=>{e(void 0)}))})),this.context=e.context;const t=document.createElement("div");t.className="p-Widget jp-Toolbar jp-NotebookPanel-toolbar";const n=document.createElement("div");n.className="p-Widget jp-ToolbarButton jp-Toolbar-item",n.innerHTML='\n        <button class="bp3-button bp3-minimal jp-ToolbarButtonComponent minimal jp-Button" title="Save the Cognos Dashboard" disabled>\n          <span class="jp-SaveIcon jp-Icon jp-Icon-16 jp-ToolbarButtonComponent-icon"></span>\n        </button>\n      </div>\n    ';const a=n.querySelector("button");a.addEventListener("click",this.saveDashboard),this.saveButton=a;const i=document.createElement("div");i.className="p-Widget jp-ToolbarButton jp-Toolbar-item",i.innerHTML='\n        <button class="bp3-button bp3-minimal jp-ToolbarButtonComponent minimal jp-Button" title="Undo the last action" disabled>\n          <span class="jp-RefreshIcon reversed jp-Icon jp-Icon-16 jp-ToolbarButtonComponent-icon"></span>\n        </button>\n      </div>\n    ';const p=i.querySelector("button");p.addEventListener("click",this.undo),this.undoButton=p;const u=document.createElement("div");u.className="p-Widget jp-ToolbarButton jp-Toolbar-item",u.innerHTML='\n        <button class="bp3-button bp3-minimal jp-ToolbarButtonComponent minimal jp-Button" title="Redo the last action" disabled>\n          <span class="jp-RefreshIcon jp-Icon jp-Icon-16 jp-ToolbarButtonComponent-icon"></span>\n        </button>\n      </div>\n    ';const m=u.querySelector("button");m.addEventListener("click",this.redo),this.redoButton=m;const b=document.createElement("div");b.className="bp3-html-select bp3-minimal jp-Notebook-toolbarCellTypeDropdown jp-HTMLSelect",b.innerHTML='\n      <div>\n        <select title="Change the dashboard mode" class="bp3-html-select bp3-minimal jp-Notebook-toolbarCellTypeDropdown jp-HTMLSelect">\n          <option value="VIEW">View Only</option>\n          <option value="EDIT">Edit</option>\n          <option value="EDIT_GROUP">Edit Group</option>\n        </select>\n        <span class="jp-MaterialIcon jp-DownCaretIcon bp3-icon"></span>\n      </div>\n    ';const g=b.querySelector("select");g.addEventListener("change",this.onModeSelectChange),this.modeSelect=g;const v=document.createElement("div");v.className="p-Widget jp-ToolbarButton jp-Toolbar-item",v.innerHTML='\n        <button class="bp3-button bp3-minimal jp-ToolbarButtonComponent minimal jp-Button" title="Toggle the properties sidebar" disabled>\n          <span class="jp-SettingsIcon jp-Icon jp-Icon-16 jp-ToolbarButtonComponent-icon"></span>\n        </button>\n      </div>\n    ';const C=v.querySelector("button");C.addEventListener("click",this.toggleProperties),this.propertiesButton=C;const f=document.createElement("div");f.className="p-Widget jp-ToolbarButton jp-Toolbar-item",f.innerHTML='\n        <button class="bp3-button bp3-minimal jp-ToolbarButtonComponent minimal jp-Button" title="Share this dashboard">\n          <span class="jp-LinkIcon jp-Icon jp-Icon-16 jp-ToolbarButtonComponent-icon"></span>\n        </button>\n      </div>\n    ';const y=f.querySelector("button");y.addEventListener("click",this.shareDashboard),this.shareButton=y;const j=document.createElement("div");j.className="p-Widget jp-ToolbarButton jp-Toolbar-item",j.innerHTML='\n        <button class="bp3-button bp3-minimal jp-ToolbarButtonComponent minimal jp-Button" title="Start Cognos Dashboard tutorial">\n          <span class="jp-LauncherIcon jp-Icon jp-Icon-16 jp-ToolbarButtonComponent-icon"></span>\n        </button>\n      </div>\n    ';const w=j.querySelector("button");w.addEventListener("click",this.openTutorialMenu),this.tutorialButton=w,t.appendChild(n),t.appendChild(i),t.appendChild(u),t.appendChild(b),t.appendChild(v),t.appendChild(f),t.appendChild(j),this.node.appendChild(t),l.getScript("https://dde-us-south.analytics.ibm.com/daas/CognosApi.js",(()=>{this.startCognosDashboard()})),l.getScript("https://unpkg.com/@cognitive-class/jupyterlab-cde-plugin@latest/standalone/jupyterlab-cde-plugin.js",(()=>{})),l.getScript("//fast.appcues.com/37752.js",(()=>{window.Appcues.anonymous(),window.Appcues.show("-LIrR_X_GfWJHRVQVwz8")})),this.container=document.createElement("div"),this.container.className="p-Widget jp-Notebook jp-NotebookPanel-notebook jp-mod-commandMode",this.container.id="cognos-container",this.node.appendChild(this.container),this.container.appendChild(l("<div/>",{id:"jupyterlab-cde-plugin"})[0]),this.id="cognos-jupyterlab",this.title.closable=!0,this.addClass("jp-cognosWidget"),this._onTitleChanged(),this.context.pathChanged.connect(this._onTitleChanged,this),this.context.ready.then((()=>{this._onContextReady()})),this.context.ready.then((()=>{this._handleDirtyStateCognos()}))}get dashboardMode(){return this._dashboardMode}get ready(){return this._ready.promise}get cognosReady(){return this._cognosReady.promise}get cognosApi(){return this._cognosApi}set cognosApi(e){this._cognosApi=e}get dashboardApi(){return this._dashboardApi}set dashboardApi(e){this._dashboardApi=e}handleEvent(e){}onAfterAttach(e){super.onAfterAttach(e),this.update();const t=this.container;t.addEventListener("click",this),t.addEventListener("p-dragenter",this),t.addEventListener("p-dragleave",this),t.addEventListener("p-dragover",this),t.addEventListener("p-drop",this)}_onContextReady(){const e=this.context.model;this._onContentChanged(),e.contentChanged.connect(this._onContentChanged,this),e.stateChanged.connect(this._onModelStateChangedCognos,this)}_onTitleChanged(){this.title.label=c.PathExt.basename(this.context.localPath)}}var h;t.CognosDashboardWidget=p,function(e){class t extends i.Widget{constructor(e){super({node:d(e)})}}e.CredentialsForm=t;class n extends i.Widget{constructor(e,t){super({node:s(0,t)})}}e.ShowcaseLink=n;class o extends i.Widget{constructor(e){super({node:a()})}}function a(e){const t=document.createElement("div"),n=document.createElement("button");let o=document.createTextNode("Signing up with IBM Cloud");n.className="jp-mod-accept jp-mod-styled",n.value="Signing up with IBM Cloud",n.onclick=()=>{window.Appcues.show("-LJy1LgGAnFLvYdOft_2")},n.style.cssText="margin: 4px;",n.appendChild(o),t.appendChild(n);const a=document.createElement("button");o=document.createTextNode("Creating credentials"),a.className="jp-mod-accept jp-mod-styled",a.value="Creating credentials",a.onclick=()=>{window.Appcues.show("-LJy2maJY76FqYQmeGt6")},a.style.cssText="margin: 4px;",a.appendChild(o),t.appendChild(a);const s=document.createElement("button");return o=document.createTextNode("Adding data source"),s.className="jp-mod-accept jp-mod-styled",s.value="Adding data source",s.onclick=()=>{window.Appcues.show("-LJy4NSwY2WcbecdaMNg")},s.style.cssText="margin: 4px;",s.appendChild(o),t.appendChild(s),t}function s(e,t){const n=document.createElement("div");n.setAttribute("style","display: inline-flex; align-items: center;  flex-direction: row; padding-bottom: 15px;");const o="https://showcase.labs.skills.network/dashboards/"+t,a=document.createElement("button");a.className="p-Widget jp-mod-styled jp-CopyIcon jp-ToolbarButtonComponent copyShowcaseUrl",a.title="Copy link to clipboard",a.setAttribute("style","width: 30px; height: 30px;");const s=document.createElement("span");s.className="jp-CopyIcon jp-Icon jp-Icon-16",a.appendChild(s);const i=document.createElement("span");return i.setAttribute("style","padding-right: 10px;"),i.innerHTML=o,a.onclick=()=>{const e=document.createRange();e.selectNode(i),window.getSelection().addRange(e);try{document.execCommand("copy")}catch(e){console.log("Oops, unable to copy")}window.getSelection().removeAllRanges()},n.appendChild(i),n.appendChild(a),n}function d(e){const t=document.createElement("div");t.appendChild(l('<label><a href="https://console.bluemix.net/catalog/services/ibm-cognos-dashboard-embedded" target="_blank">Learn more</a></label>')[0]);const n=document.createElement("label");n.innerHTML="client_id",t.appendChild(n);const o=document.createElement("input");o.id="client_id",l(o).change((t=>{e.client_id=l("#"+o.id).val()})),t.appendChild(o);const a=document.createElement("label");a.innerHTML="client_secret",t.appendChild(a);const s=document.createElement("input");s.id="client_secret",l(s).change((t=>{e.client_secret=l("#"+s.id).val()})),t.appendChild(s);const i=document.createElement("datalist");i.id="endpoints",["https://us-south.dynamic-dashboard-embedded.cloud.ibm.com/daas/","https://eu-gb.dynamic-dashboard-embedded.cloud.ibm.com/daas/","https://dde-us-south.analytics.ibm.com/daas/","https://dde-uk-south.analytics.ibm.com/daas/"].forEach((e=>{const t=document.createElement("option");t.value=e,t.text=e,i.appendChild(t)})),t.appendChild(i),console.log(i);const d=document.createElement("label");d.innerHTML="api_endpoint_url",t.appendChild(d);const r=document.createElement("input");return r.id="api_endpoint_url",r.setAttribute("list","endpoints"),l(r).change((t=>{e.api_endpoint_url=l("#"+r.id).val()})),t.appendChild(r),t}e.TutorialMenu=o}(h||(h={}));class u extends a.ABCWidgetFactory{constructor(e){super(e)}createNewWidget(e){return new p({context:e,content:new i.Widget})}}t.CognosDashboardFactory=u},568:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(475),a=n(441),s=n(390),i=n(989);n(549);const d=n(649),r="Cognos",c={id:"jupyterlab_cognos",autoStart:!0,requires:[a.ICommandPalette,o.ILayoutRestorer,s.ILauncher,i.IFileBrowserFactory],optional:[],activate:(e,t,n,o,a)=>{const s=new d.CognosDashboardFactory({name:r,fileTypes:["cognos"],defaultFor:["cognos"]}),{commands:i}=e,c="cognosdashboard:create-new";i.addCommand(c,{execute:()=>{return e=a.defaultBrowser.model.path,i.execute("docmanager:new-untitled",{path:e,type:"file",ext:".cognos"}).then((e=>i.execute("docmanager:open",{path:e.path,factory:r})));var e},label:"Cognos Dashboard",caption:"Cognos Dashboard",iconClass:"jp-MaterialIcon jp-CognosIcon"}),o&&o.add({command:c,category:"Other"}),console.log("Cognos Dashboard Extension enabled!"),e.docRegistry.addWidgetFactory(s),e.docRegistry.addFileType({name:"cognos",displayName:"Cognos Dashboard",mimeTypes:["application/cognos"],extensions:[".cognos"],iconClass:"jp-CognosIcon jp-ImageIcon",fileFormat:"json"})}};t.default=c},150:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var o=n(645),a=n.n(o),s=n(667),i=n.n(s),d=n(898),r=n(268),c=a()((function(e){return e[1]})),l=i()(d.Z),p=i()(r.Z);c.push([e.id,".jp-CognosIcon {\n  background-image: url("+l+");\n}\n\n.jp-CognosIcon.jp-ImageIcon {\n  background-size: 80% 100%;\n  background-repeat: no-repeat;\n}\n\n.jp-DirListing-item.jp-mod-selected .jp-CognosIcon.jp-ImageIcon {\n  background-image: url("+p+");\n  background-size: 80% 100%;\n  background-repeat: no-repeat;\n}\n\n.custom-footer {\n  padding-right: 0px;\n  margin-right: 0px;\n}\n\n#cognos-container {\n  height: 100%;\n}\n\n.reversed {\n  transform: scaleX(-1);\n  -moz-transform: scaleX(-1);\n  -webkit-transform: scaleX(-1);\n  -ms-transform: scaleX(-1);\n}\n\n.copyShowcaseUrl:hover {\n  background-color: lightgray;\n  cursor: pointer;\n}\n.copyShowcaseUrl:active {\n  background-color: gray;\n}\n",""]);const h=c},760:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var o=n(645),a=n.n(o),s=n(150),i=a()((function(e){return e[1]}));i.i(s.Z),i.push([e.id,"\n",""]);const d=i},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,o){"string"==typeof e&&(e=[[null,e,""]]);var a={};if(o)for(var s=0;s<this.length;s++){var i=this[s][0];null!=i&&(a[i]=!0)}for(var d=0;d<e.length;d++){var r=[].concat(e[d]);o&&a[r[0]]||(n&&(r[2]?r[2]="".concat(n," and ").concat(r[2]):r[2]=n),t.push(r))}},t}},667:e=>{"use strict";e.exports=function(e,t){return t||(t={}),"string"!=typeof(e=e&&e.__esModule?e.default:e)?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},268:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o=n.p+"0cc0f627985d8b26b1854b06cadef9aa.png"},898:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o=n.p+"d1afcda6edbc28aa01a7f793d80acad7.png"},549:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var o=n(379),a=n.n(o),s=n(760);a()(s.Z,{insert:"head",singleton:!1});const i=s.Z.locals||{}},379:(e,t,n)=>{"use strict";var o,a=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),s=[];function i(e){for(var t=-1,n=0;n<s.length;n++)if(s[n].identifier===e){t=n;break}return t}function d(e,t){for(var n={},o=[],a=0;a<e.length;a++){var d=e[a],r=t.base?d[0]+t.base:d[0],c=n[r]||0,l="".concat(r," ").concat(c);n[r]=c+1;var p=i(l),h={css:d[1],media:d[2],sourceMap:d[3]};-1!==p?(s[p].references++,s[p].updater(h)):s.push({identifier:l,updater:b(h,t),references:1}),o.push(l)}return o}function r(e){var t=document.createElement("style"),o=e.attributes||{};if(void 0===o.nonce){var s=n.nc;s&&(o.nonce=s)}if(Object.keys(o).forEach((function(e){t.setAttribute(e,o[e])})),"function"==typeof e.insert)e.insert(t);else{var i=a(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}return t}var c,l=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function p(e,t,n,o){var a=n?"":o.media?"@media ".concat(o.media," {").concat(o.css,"}"):o.css;if(e.styleSheet)e.styleSheet.cssText=l(t,a);else{var s=document.createTextNode(a),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(s,i[t]):e.appendChild(s)}}function h(e,t,n){var o=n.css,a=n.media,s=n.sourceMap;if(a?e.setAttribute("media",a):e.removeAttribute("media"),s&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}var u=null,m=0;function b(e,t){var n,o,a;if(t.singleton){var s=m++;n=u||(u=r(t)),o=p.bind(null,n,s,!1),a=p.bind(null,n,s,!0)}else n=r(t),o=h.bind(null,n,t),a=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else a()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===o&&(o=Boolean(window&&document&&document.all&&!window.atob)),o));var n=d(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var o=0;o<n.length;o++){var a=i(n[o]);s[a].references--}for(var r=d(e,t),c=0;c<n.length;c++){var l=i(n[c]);0===s[l].references&&(s[l].updater(),s.splice(l,1))}n=r}}}}}]);