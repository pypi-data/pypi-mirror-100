(function(){d3.timeline=function(){function a(){f.forEach(function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);b.start=g(i(a)),b.end=g(j(a)),b.lane=0,h.push(b)})}function b(){if(!1===q){var a=d3.min(h,function(a){return a.start}),b=d3.max(h,function(a){return a.end});l=[a,b]}else l=[g(m[0]),g(m[1])];n.domain(l).range([0,k[0]]),h.forEach(function(a){a.originalStart=a.start,a.originalEnd=a.end,a.start=n(a.start),a.end=n(a.end)})}function c(a,b){if(a.end<b.start||a.start>b.end)return!0;var c=a.filter(function(a){return a.start<=b.end&&a.end>=b.start});return 0===c.length}function d(a){if(void 0===o[0])return void(o[0]=[a]);for(var b=o.length-1,d=0;d<=b;){if(c(o[d],a))return void o[d].push(a);d++}o[d]=[a]}function e(c){var g=Math.min;if(!arguments.length)return e;f=c,h=[],o=[],a(),b(),h.forEach(function(a){d(a)});var j=k[1]/o.length;return j=g(j,r),o.forEach(function(a,b){a.forEach(function(a){a.y=b*j,a.dy=j-p,a.lane=b})}),h}var f=[],g=function(a){return new Date(a)},h=[],i=function(a){return a.start},j=function(a){return a.end},k=[500,100],l=[-Infinity,1/0],m=[],n=d3.scaleLinear(),o=[],p=0,q=!1,r=1/0;return e.dateFormat=function(a){return arguments.length?(g=a,e):g},e.bandStart=function(a){return arguments.length?(i=a,e):i},e.bandEnd=function(a){return arguments.length?(j=a,e):j},e.size=function(a){return arguments.length?(k=a,e):k},e.padding=function(a){return arguments.length?(p=a,e):p},e.extent=function(a){return arguments.length?(q=!0,m=a,0===a.length&&(q=!1),e):l},e.maxBandHeight=function(a){return arguments.length?(r=a,e):r},e}})();